(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1213:function(e,t){},1866:function(e,t,n){__NEXT_REGISTER_PAGE("/github",function(){return e.exports=n(2063),{page:e.exports.default}})},2063:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),o=n(1),i=n.n(o),l=n(0),u=n.n(l),c=n(16),s=n(19),p=n(74),f=n(64),m=n(17),b=n(15),d=n.n(b);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=d.a.allSupported().filter(function(e){var t=e.key;return d.a.supportsFiles(t)}).map(function(e){return{label:e.displayName,value:e.key}}),k=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return r=this,a=(e=y(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==h(a)&&"function"!=typeof a?x(r):a,w(x(x(n)),"state",{link:n.props.defaultRepo||"",language:n.props.defaultLang||""}),w(x(x(n)),"handleSubmit",function(e){e.preventDefault(),n.props.onSubmit(n.state)}),w(x(x(n)),"handleRepoLinkChange",function(e){return n.setState({link:e.currentTarget.value})}),w(x(x(n)),"handleLanguageChange",function(e){e&&e.value?n.setState({language:e.value}):n.setState({language:""})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,l["Component"]),n=t,(r=[{key:"render",value:function(){return l.createElement("form",{onSubmit:this.handleSubmit,className:"jsx-2358340422"},l.createElement("label",{className:"jsx-2358340422 githubform-label"},l.createElement("span",{className:"jsx-2358340422"},"Repository URL"),l.createElement(p.a,{style:{height:"36px",padding:"0 10px"},onChange:this.handleRepoLinkChange,value:this.state.link,placeholder:"Any ref with an optional path (default master)",required:!0})),l.createElement("label",{className:"jsx-2358340422 githubform-label"},l.createElement("span",{className:"jsx-2358340422"},"Language"),l.createElement(f.b,{placeholder:"Pick a language",value:this.state.language,onChange:this.handleLanguageChange,options:E,instanceId:"language",searchable:!0,required:!0})),l.createElement(m.b,{type:"submit"},"Submit"),l.createElement(i.a,{id:"2358340422"},[".githubform-label.jsx-2358340422{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-bottom:15px;}",".githubform-label.jsx-2358340422>span.jsx-2358340422{font-size:16px;margin-bottom:15px;}"]))}}])&&g(n.prototype,r),a&&g(n,a),t}(),j=n(18);function S(e){var t=e.status;return u.a.createElement("div",{className:"jsx-3093319264 githubstatus"},u.a.createElement("div",{className:"jsx-3093319264"},function(e){switch(e){case"init":return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,"1/4"),u.a.createElement("div",null,"Checking repository on GitHub"));case"downloading":return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,"2/4"),u.a.createElement("div",null,"Downloading repository files"));case"creating":return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,"3/4"),u.a.createElement("div",null,"Creating repl from repository"));case"complete":return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,"4/4"),u.a.createElement("div",null,"Repl creation successful, you will be redirected in a second"));default:throw new Error("unknown github import status ".concat(e))}}(t)),u.a.createElement("div",{className:"jsx-3093319264"},u.a.createElement(j.a,null)),u.a.createElement(i.a,{id:"3093319264"},[".githubstatus.jsx-3093319264{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;text-align:center;}",".githubstatus.jsx-3093319264>div.jsx-3093319264{margin:10px;}"]))}var _=n(2),O=function(e){var t=e.error;return l.createElement("div",{className:i.a.dynamic([["2609625743",[_.a.errorRed,_.a.errorRed]]])},t,l.createElement(i.a,{id:"2609625743",dynamic:[_.a.errorRed,_.a.errorRed]},["div.__jsx-style-dynamic-selector{border:1px solid ".concat(_.a.errorRed,";font-size:14px;background:").concat(_.a.errorRed,";color:white;padding:10px 20px;margin:20px 0;}")]))},R=(n(1213),n(32)),P=n(93),T=n(6);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,l,"next",e)}function l(e){C(o,r,a,i,l,"throw",e)}i(void 0)})}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,u=new Array(i),s=0;s<i;s++)u[s]=arguments[s];return r=this,o=(e=U(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==I(o)&&"function"!=typeof o?G(r):o,H(G(G(n)),"state",{status:null,error:null}),H(G(G(n)),"handleSubmit",function(){var e=N(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({status:"init",error:null}),Object(T.track)(T.events.GITHUB_IMPORT_FORM_SUBMITTED,t),e.abrupt("return",Object(c.postJson)("/data/repls/github/create",t).then(function(){n.checkStatus(t)}).catch(function(e){n.setState({status:null,error:e.message})}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),H(G(G(n)),"checkStatus",function(){var e=N(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c.getJson)("/data/repls/github/".concat(encodeURIComponent(t.link),"/status")).then(function(e){var r=e.status,a=e.replUrl;if("string"==typeof r&&r.startsWith("error:")){var o=r.split(":")[1]||l.createElement("span",null,"There was an error during the creation of the Repl. Please try again, and ",l.createElement("a",{href:"/bugs"},"let us know")," if the issue persists.");n.setState({status:null,error:o})}else"init"!==r&&"downloading"!==r&&"creating"!==r&&"complete"!==r||(n.setState({status:r}),"complete"===r?"string"==typeof a&&n.props.router.push({pathname:"/replEnvironment",query:{replUrl:a}},{pathname:a}):setTimeout(function(){n.checkStatus(t)},5e3))}).catch(function(e){n.setState({status:null,error:e.message})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),H(G(G(n)),"getRepoAndLang",function(){var e=n.props.router,t="",r="";return e&&(e.asPath&&e.asPath.startsWith("/github/")&&(t=(t=e.asPath.replace("/github/","")).split("?")[0]),e.query&&e.query.lang&&(r=e.query.lang)),{repo:t,lang:r}}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,l["Component"]),n=t,r=[{key:"componentDidMount",value:function(){var e=this;Object(T.track)(T.events.GITHUB_IMPORT_VISITED,{});var t=this.props.router,n=this.getRepoAndLang().repo;if(n){Object(T.track)(T.events.GITHUB_IMPORT_URL_SHORTCUT_USED,{repo:n}),this.setState({status:"init"});var r={link:n,language:t.query?t.query.lang:void 0};Object(c.postJson)("/data/repls/github/create",r).then(function(){e.checkStatus(r)}).catch(function(t){e.setState({status:null,error:t.message})})}}},{key:"render",value:function(){var e=this.state,t=e.status,n=e.error,r=this.props.router,a=this.getRepoAndLang(),o=a.repo,u=a.lang;return l.createElement(s.a,{title:"Import from GitHub",location:r.pathname,dynamicHeader:!0},l.createElement(P.a,null),l.createElement("div",{className:i.a.dynamic([["182684613",[_.a.black]]])+" github-wrapper"},l.createElement("div",{className:i.a.dynamic([["182684613",[_.a.black]]])+" github-title"},"Import a repository from GitHub"),n?l.createElement(O,{error:n}):null,t?l.createElement(S,{status:t}):l.createElement(k,{defaultRepo:o,defaultLang:u,onSubmit:this.handleSubmit}),l.createElement(i.a,{id:"182684613",dynamic:[_.a.black]},[".github-wrapper.__jsx-style-dynamic-selector{font-family:'Questrial';color:".concat(_.a.black,";margin:0 auto;max-width:600px;min-width:400px;padding:50px;}"),".github-title.__jsx-style-dynamic-selector{padding:15px 0 0;margin-bottom:20px;font-size:19px;}"])))}}],o=[{key:"getInitialProps",value:function(){var e=N(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.req,r=t.store,e.abrupt("return",Object(R.a)(n,r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],r&&L(n.prototype,r),o&&L(n,o),t}();t.default=A}},[[1866,2,0,1]]]);
//# sourceMappingURL=github.js.map